<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.ssafy.enjoytrip.board.model.mapper.BoardMapper">
	
	<resultMap type="board" id="boardMap">
		<result column="board_no" property="boardNo"/>
		<result column="board_title" property="boardTitle"/>
		<result column="member_id" property="memberId"/>
		<result column="sido_code" property="sidoCode"/>
		<result column="board_content" property="boardContent"/>
		<result column="board_hit" property="boardHit"/>
		<result column="board_love" property="boardLove"/>
		<result column="board_x" property="boardX"/>
		<result column="board_y" property="boardY"/>
		<result column="board_register_time" property="boardRegisterTime"/>
	</resultMap>
	
	<insert id="boardInsert" parameterType="board">
		insert into board (board_title, member_id, sido_code, board_content, board_x, board_y)
		values (#{boardTitle}, #{memberId}, #{sidoCode}, #{boardContent}, #{boardX}, #{boardY})
	</insert>
	
	<select id="boardList" parameterType="int" resultMap="boardMap">
		select board_no, board_title, member_id, sido_code, board_hit, board_love, board_register_time, board_x, board_y
		from board
		where sido_code = #{sidoCode}
	</select>
	
	<select id="boardView" resultMap="boardMap" parameterType="int">
		select board_no, board_title, member_id, sido_code, board_content, board_hit, board_love, board_register_time, board_x, board_y
		  from board
		 where board_no = #{boardNo}
	</select>
	
	<delete id="boardDelete" parameterType="int">
		delete
		from board
		where board_no = #{boardNo}
	</delete>
	
	<update id="boardUpdate" parameterType="board">
		update board
		<trim prefix="set" suffixOverrides=",">
			<if test="boardTitle != null">board_title = #{boardTitle},</if>
			<if test="boardContent != null">board_content = #{boardContent},</if>
		</trim>
		where board_no = #{boardNo}
	</update>
	
	<update id="boardUpdateHit" parameterType="int">
		update board
		   set board_hit = board_hit + 1
		 where board_no = #{boardNo}
	</update>
	
	<update id="boardUpdateLove" parameterType="map">
		update board
		   set board_love = board_love + #{num}
		 where board_no = #{boardNo}
	</update>
	
	<delete id="deleteMemberBoards" parameterType="String">
		delete
		from board
		where member_id = #{memberId}
	</delete>
	

</mapper>